define(["module"],function(t){var e,n=t.exports={};(function(){function t(t,e){"use strict";var n=new i(t,e);return n.beautify()}function i(t,e){"use strict";function n(t,e){var n=0;t&&(n=t.indentation_level,!h()&&t.line_indent_level>n&&(n=t.line_indent_level));var i={mode:e,parent:t,last_text:t?t.last_text:"",last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,in_html_comment:!1,multiline_frame:!1,if_block:!1,else_block:!1,do_block:!1,do_while:!1,in_case_statement:!1,in_case:!1,case_body:!1,indentation_level:n,line_indent_level:t?t.line_indent_level:n,start_line_index:Y.length,had_comment:!1,ternary_depth:0};return i}function i(){return{text:[]}}function s(t){if(t=void 0===t?!1:t,Y.length)for(a(Y[Y.length-1],t);t&&Y.length>1&&0===Y[Y.length-1].text.length;)Y.pop(),a(Y[Y.length-1],t)}function a(t){for(;t.text.length&&(" "===t.text[t.text.length-1]||t.text[t.text.length-1]===te||t.text[t.text.length-1]===Re);)t.text.pop()}function _(t){return t.replace(/^\s+|\s+$/g,"")}function o(t){t=t.replace(/\x0d/g,"");for(var e=[],n=t.indexOf("\n");n!==-1;)e.push(t.substring(0,n)),t=t.substring(n+1),n=t.indexOf("\n");return t.length&&e.push(t),e}function h(){var t=Y[Y.length-1];return 0===t.text.length}function l(){if(h()){if(1===Y.length)return!0;var t=Y[Y.length-2];return 0===t.text.length}return!1}function c(t){if(t=void 0===t?!1:t,Ke.wrap_line_length&&!t){var e=Y[Y.length-1],n=0;e.text.length>0&&(n=e.text.join("").length+q.length+(pe?1:0),n>=Ke.wrap_line_length&&(t=!0))}(Ke.preserve_newlines&&ue||t)&&!h()&&u(!1,!0)}function u(t,e){if(pe=!1,!e&&";"!==ee.last_text&&","!==ee.last_text&&"="!==ee.last_text&&"TK_OPERATOR"!==H)for(;ee.mode===ge.Statement&&!ee.if_block&&!ee.do_block;)x();1===Y.length&&h()||(t||!h())&&(ee.multiline_frame=!0,Y.push(i()))}function p(){if(h()){var t=Y[Y.length-1];if(Ke.keep_array_indentation&&m(ee.mode)&&ue){t.text.push("");for(var e=0;Te.length>e;e+=1)t.text.push(Te[e])}else Re&&t.text.push(Re),f(ee.indentation_level)}}function f(t){if(Y.length>1){var e=Y[Y.length-1];ee.line_indent_level=t;for(var n=0;t>n;n+=1)e.text.push(te)}}function d(){var t=Y[Y.length-1];if(pe&&t.text.length){var e=t.text[t.text.length-1];" "!==e&&e!==te&&t.text.push(" ")}}function T(t){t=t||q,p(),d(),pe=!1,Y[Y.length-1].text.push(t)}function E(){ee.indentation_level+=1}function g(){ee.indentation_level>0&&(!ee.parent||ee.indentation_level>ee.parent.indentation_level)&&(ee.indentation_level-=1)}function K(t){if(!t.multiline_frame)for(var e,n=t.start_line_index,i=0;Y.length>n;)e=Y[n],n++,0!==e.text.length&&(i=Re&&e.text[0]===Re?1:0,e.text[i]===te&&e.text.splice(i,1))}function R(t){ee?(ie.push(ee),ne=ee):ne=n(null,t),ee=n(ne,t)}function m(t){return t===ge.ArrayLiteral}function v(t){return w(t,[ge.Expression,ge.ForInitializer,ge.Conditional])}function x(){ie.length>0&&(ne=ee,ee=ie.pop(),ne.mode===ge.Statement&&K(ne))}function A(){return ee.parent.mode===ge.ObjectLiteral&&ee.mode===ge.Statement&&":"===ee.last_text&&0===ee.ternary_depth}function O(){return"TK_RESERVED"===H&&w(ee.last_text,["var","let","const"])&&"TK_WORD"===Z||"TK_RESERVED"===H&&"do"===ee.last_text||"TK_RESERVED"===H&&"return"===ee.last_text&&!ue||"TK_RESERVED"===H&&"else"===ee.last_text&&("TK_RESERVED"!==Z||"if"!==q)||"TK_END_EXPR"===H&&(ne.mode===ge.ForInitializer||ne.mode===ge.Conditional)||"TK_WORD"===H&&ee.mode===ge.BlockStatement&&!ee.in_case&&"--"!==q&&"++"!==q&&"TK_WORD"!==Z&&"TK_RESERVED"!==Z||ee.mode===ge.ObjectLiteral&&":"===ee.last_text&&0===ee.ternary_depth?(R(ge.Statement),E(),"TK_RESERVED"===H&&w(ee.last_text,["var","let","const"])&&"TK_WORD"===Z&&(ee.declaration_statement=!0),A()||c("TK_RESERVED"===Z&&w(q,["do","for","if","while"])),!0):!1}function b(t,e){for(var n=0;t.length>n;n++){var i=_(t[n]);if(i.charAt(0)!==e)return!1}return!0}function y(t,e){for(var n,i=0,r=t.length;r>i;i++)if(n=t[i],n&&0!==n.indexOf(e))return!1;return!0}function S(t){return w(t,["case","return","do","if","throw","else"])}function w(t,e){for(var n=0;e.length>n;n+=1)if(e[n]===t)return!0;return!1}function N(t){for(var e,n=!1,i="",r=0,s="",a=0;n||t.length>r;)if(e=t.charAt(r),r++,n){if(n=!1,"x"===e)s=t.substr(r,2),r+=2;else{if("u"!==e){i+="\\"+e;continue}s=t.substr(r,4),r+=4}if(!s.match(/^[0123456789abcdefABCDEF]+$/))return t;if(a=parseInt(s,16),a>=0&&32>a){i+="x"===e?"\\x"+s:"\\u"+s;continue}if(34===a||39===a||92===a)i+="\\"+String.fromCharCode(a);else{if("x"===e&&a>126&&255>=a)return t;i+=String.fromCharCode(a)}}else"\\"===e?n=!0:i+=e;return i}function k(t){for(var e=_e,n=Q.charAt(e);w(n,re)&&n!==t;){if(e++,e>=fe)return!1;n=Q.charAt(e)}return n===t}function C(){var t;if(de=0,_e>=fe)return["","TK_EOF"];ue=!1,Te=[];var e=Q.charAt(_e);for(_e+=1;w(e,re);){if("\n"===e?(de+=1,Te=[]):de&&(e===te?Te.push(te):"\r"!==e&&Te.push(" ")),_e>=fe)return["","TK_EOF"];e=Q.charAt(_e),_e+=1}if(r.isIdentifierChar(Q.charCodeAt(_e-1))){if(fe>_e)for(;r.isIdentifierChar(Q.charCodeAt(_e))&&(e+=Q.charAt(_e),_e+=1,_e!==fe););if(_e!==fe&&e.match(/^[0-9]+[Ee]$/)&&("-"===Q.charAt(_e)||"+"===Q.charAt(_e))){var n=Q.charAt(_e);_e+=1;var i=C();return e+=n+i[0],[e,"TK_WORD"]}return"TK_DOT"===H||"TK_RESERVED"===H&&w(ee.last_text,["set","get"])||!w(e,he)?[e,"TK_WORD"]:"in"===e?[e,"TK_OPERATOR"]:[e,"TK_RESERVED"]}if("("===e||"["===e)return[e,"TK_START_EXPR"];if(")"===e||"]"===e)return[e,"TK_END_EXPR"];if("{"===e)return[e,"TK_START_BLOCK"];if("}"===e)return[e,"TK_END_BLOCK"];if(";"===e)return[e,"TK_SEMICOLON"];if("/"===e){var s="",a=!0;if("*"===Q.charAt(_e)){if(_e+=1,fe>_e)for(;fe>_e&&("*"!==Q.charAt(_e)||!Q.charAt(_e+1)||"/"!==Q.charAt(_e+1))&&(e=Q.charAt(_e),s+=e,("\n"===e||"\r"===e)&&(a=!1),_e+=1,!(_e>=fe)););return _e+=2,a&&0===de?["/*"+s+"*/","TK_INLINE_COMMENT"]:["/*"+s+"*/","TK_BLOCK_COMMENT"]}if("/"===Q.charAt(_e)){for(s=e;"\r"!==Q.charAt(_e)&&"\n"!==Q.charAt(_e)&&(s+=Q.charAt(_e),_e+=1,!(_e>=fe)););return[s,"TK_COMMENT"]}}if("`"===e||"'"===e||'"'===e||("/"===e||Ke.e4x&&"<"===e&&Q.slice(_e-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&("TK_RESERVED"===H&&S(ee.last_text)||"TK_END_EXPR"===H&&w(ne.mode,[ge.Conditional,ge.ForInitializer])||w(H,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var o=e,h=!1,l=!1;if(t=e,fe>_e)if("/"===o){for(var c=!1;h||c||Q.charAt(_e)!==o;)if(t+=Q.charAt(_e),h?h=!1:(h="\\"===Q.charAt(_e),"["===Q.charAt(_e)?c=!0:"]"===Q.charAt(_e)&&(c=!1)),_e+=1,_e>=fe)return[t,"TK_STRING"]}else if(Ke.e4x&&"<"===o){var u=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g,p=Q.slice(_e-1),f=u.exec(p);if(f&&0===f.index){for(var d=f[2],T=0;f;){var E=!!f[1],g=f[2],K=!!f[f.length-1]||"![CDATA["===g.slice(0,8);if(g!==d||K||(E?--T:++T),0>=T)break;f=u.exec(p)}var R=f?f.index+f[0].length:p.length;return _e+=R-1,[p.slice(0,R),"TK_STRING"]}}else for(;h||Q.charAt(_e)!==o;)if(t+=Q.charAt(_e),h?(("x"===Q.charAt(_e)||"u"===Q.charAt(_e))&&(l=!0),h=!1):h="\\"===Q.charAt(_e),_e+=1,_e>=fe)return[t,"TK_STRING"];if(_e+=1,t+=o,l&&Ke.unescape_strings&&(t=N(t)),"/"===o)for(;fe>_e&&w(Q.charAt(_e),se);)t+=Q.charAt(_e),_e+=1;return[t,"TK_STRING"]}if("#"===e){if(1===Y.length&&0===Y[0].text.length&&"!"===Q.charAt(_e)){for(t=e;fe>_e&&"\n"!==e;)e=Q.charAt(_e),t+=e,_e+=1;return[_(t)+"\n","TK_UNKNOWN"]}var m="#";if(fe>_e&&w(Q.charAt(_e),le)){do e=Q.charAt(_e),m+=e,_e+=1;while(fe>_e&&"#"!==e&&"="!==e);return"#"===e||("["===Q.charAt(_e)&&"]"===Q.charAt(_e+1)?(m+="[]",_e+=2):"{"===Q.charAt(_e)&&"}"===Q.charAt(_e+1)&&(m+="{}",_e+=2)),[m,"TK_WORD"]}}if("<"===e&&"<!--"===Q.substring(_e-1,_e+3)){for(_e+=3,e="<!--";"\n"!==Q.charAt(_e)&&fe>_e;)e+=Q.charAt(_e),_e++;return ee.in_html_comment=!0,[e,"TK_COMMENT"]}if("-"===e&&ee.in_html_comment&&"-->"===Q.substring(_e-1,_e+2))return ee.in_html_comment=!1,_e+=2,["-->","TK_COMMENT"];if("."===e)return[e,"TK_DOT"];if(w(e,ae)){for(;fe>_e&&w(e+Q.charAt(_e),ae)&&(e+=Q.charAt(_e),_e+=1,!(_e>=fe)););return","===e?[e,"TK_COMMA"]:"="===e?[e,"TK_EQUALS"]:[e,"TK_OPERATOR"]}return[e,"TK_UNKNOWN"]}function L(){O();var t=ge.Expression;if("["===q){if("TK_WORD"===H||")"===ee.last_text)return"TK_RESERVED"===H&&w(ee.last_text,oe)&&(pe=!0),R(t),T(),E(),Ke.space_in_paren&&(pe=!0),void 0;t=ge.ArrayLiteral,m(ee.mode)&&("["===ee.last_text||","===ee.last_text&&("]"===J||"}"===J))&&(Ke.keep_array_indentation||u())}else"TK_RESERVED"===H&&"for"===ee.last_text?t=ge.ForInitializer:"TK_RESERVED"===H&&w(ee.last_text,["if","while"])&&(t=ge.Conditional);";"===ee.last_text||"TK_START_BLOCK"===H?u():"TK_END_EXPR"===H||"TK_START_EXPR"===H||"TK_END_BLOCK"===H||"."===ee.last_text?c(ue):"TK_RESERVED"===H&&"("===q||"TK_WORD"===H||"TK_OPERATOR"===H?"TK_RESERVED"===H&&("function"===ee.last_word||"typeof"===ee.last_word)||"*"===ee.last_text&&"function"===J?Ke.jslint_happy&&(pe=!0):"TK_RESERVED"!==H||!w(ee.last_text,oe)&&"catch"!==ee.last_text||Ke.space_before_conditional&&(pe=!0):pe=!0,"("===q&&("TK_EQUALS"===H||"TK_OPERATOR"===H)&&(A()||c()),R(t),T(),Ke.space_in_paren&&(pe=!0),E()}function D(){for(;ee.mode===ge.Statement;)x();ee.multiline_frame&&c("]"===q&&m(ee.mode)&&!Ke.keep_array_indentation),Ke.space_in_paren&&("TK_START_EXPR"!==H||Ke.space_in_empty_paren?pe=!0:(s(),pe=!1)),"]"===q&&Ke.keep_array_indentation?(T(),x()):(x(),T()),K(ne),ee.do_while&&ne.mode===ge.Conditional&&(ne.mode=ge.Expression,ee.do_block=!1,ee.do_while=!1)}function I(){R(ge.BlockStatement);var t=k("}"),e=t&&"function"===ee.last_word&&"TK_END_EXPR"===H;"expand"===Ke.brace_style?"TK_OPERATOR"!==H&&(e||"TK_EQUALS"===H||"TK_RESERVED"===H&&S(ee.last_text)&&"else"!==ee.last_text)?pe=!0:u(!1,!0):"TK_OPERATOR"!==H&&"TK_START_EXPR"!==H?"TK_START_BLOCK"===H?u():pe=!0:m(ne.mode)&&","===ee.last_text&&("}"===J?pe=!0:u()),T(),E()}function M(){for(;ee.mode===ge.Statement;)x();var t="TK_START_BLOCK"===H;"expand"===Ke.brace_style?t||u():t||(m(ee.mode)&&Ke.keep_array_indentation?(Ke.keep_array_indentation=!1,u(),Ke.keep_array_indentation=!0):u()),x(),T()}function P(){if(O()||!ue||v(ee.mode)||"TK_OPERATOR"===H&&"--"!==ee.last_text&&"++"!==ee.last_text||"TK_EQUALS"===H||!Ke.preserve_newlines&&"TK_RESERVED"===H&&w(ee.last_text,["var","let","const","set","get"])||u(),ee.do_block&&!ee.do_while){if("TK_RESERVED"===Z&&"while"===q)return pe=!0,T(),pe=!0,ee.do_while=!0,void 0;u(),ee.do_block=!1}if(ee.if_block)if(ee.else_block||"TK_RESERVED"!==Z||"else"!==q){for(;ee.mode===ge.Statement;)x();ee.if_block=!1,ee.else_block=!1}else ee.else_block=!0;if("TK_RESERVED"===Z&&("case"===q||"default"===q&&ee.in_case_statement))return u(),(ee.case_body||Ke.jslint_happy)&&(g(),ee.case_body=!1),T(),ee.in_case=!0,ee.in_case_statement=!0,void 0;if("TK_RESERVED"===Z&&"function"===q&&((w(ee.last_text,["}",";"])||h()&&!w(ee.last_text,["{",":","=",","]))&&(l()||ee.had_comment||(u(),u(!0))),"TK_RESERVED"===H||"TK_WORD"===H?"TK_RESERVED"===H&&w(ee.last_text,["get","set","new","return"])?pe=!0:u():"TK_OPERATOR"===H||"="===ee.last_text?pe=!0:v(ee.mode)||u()),("TK_COMMA"===H||"TK_START_EXPR"===H||"TK_EQUALS"===H||"TK_OPERATOR"===H)&&(A()||c()),"TK_RESERVED"===Z&&"function"===q)return T(),ee.last_word=q,void 0;if(ce="NONE","TK_END_BLOCK"===H?"TK_RESERVED"===Z&&w(q,["else","catch","finally"])?"expand"===Ke.brace_style||"end-expand"===Ke.brace_style?ce="NEWLINE":(ce="SPACE",pe=!0):ce="NEWLINE":"TK_SEMICOLON"===H&&ee.mode===ge.BlockStatement?ce="NEWLINE":"TK_SEMICOLON"===H&&v(ee.mode)?ce="SPACE":"TK_STRING"===H?ce="NEWLINE":"TK_RESERVED"===H||"TK_WORD"===H||"*"===ee.last_text&&"function"===J?ce="SPACE":"TK_START_BLOCK"===H?ce="NEWLINE":"TK_END_EXPR"===H&&(pe=!0,ce="NEWLINE"),"TK_RESERVED"===Z&&w(q,oe)&&")"!==ee.last_text&&(ce="else"===ee.last_text?"SPACE":"NEWLINE"),"TK_RESERVED"===Z&&w(q,["else","catch","finally"]))if("TK_END_BLOCK"!==H||"expand"===Ke.brace_style||"end-expand"===Ke.brace_style)u();else{s(!0);var t=Y[Y.length-1];"}"!==t.text[t.text.length-1]&&u(),pe=!0}else"NEWLINE"===ce?"TK_RESERVED"===H&&S(ee.last_text)?pe=!0:"TK_END_EXPR"!==H?"TK_START_EXPR"===H&&"TK_RESERVED"===Z&&w(q,["var","let","const"])||":"===ee.last_text||("TK_RESERVED"===Z&&"if"===q&&"else"===ee.last_word&&"{"!==ee.last_text?pe=!0:u()):"TK_RESERVED"===Z&&w(q,oe)&&")"!==ee.last_text&&u():m(ee.mode)&&","===ee.last_text&&"}"===J?u():"SPACE"===ce&&(pe=!0);T(),ee.last_word=q,"TK_RESERVED"===Z&&"do"===q&&(ee.do_block=!0),"TK_RESERVED"===Z&&"if"===q&&(ee.if_block=!0)}function V(){for(O()&&(pe=!1);ee.mode===ge.Statement&&!ee.if_block&&!ee.do_block;)x();T(),ee.mode===ge.ObjectLiteral&&(ee.mode=ge.BlockStatement)}function j(){O()?pe=!0:"TK_RESERVED"===H||"TK_WORD"===H?pe=!0:"TK_COMMA"===H||"TK_START_EXPR"===H||"TK_EQUALS"===H||"TK_OPERATOR"===H?A()||c():u(),T()}function U(){O(),ee.declaration_statement&&(ee.declaration_assignment=!0),pe=!0,T(),pe=!0}function B(){return ee.declaration_statement?(v(ee.parent.mode)&&(ee.declaration_assignment=!1),T(),ee.declaration_assignment?(ee.declaration_assignment=!1,u(!1,!0)):pe=!0,void 0):(T(),ee.mode===ge.ObjectLiteral||ee.mode===ge.Statement&&ee.parent.mode===ge.ObjectLiteral?(ee.mode===ge.Statement&&x(),u()):pe=!0,void 0)}function W(){":"!==q||ee.mode!==ge.BlockStatement||"{"!==J||"TK_WORD"!==H&&"TK_RESERVED"!==H||(ee.mode=ge.ObjectLiteral),O();var t=!0,e=!0;return"TK_RESERVED"===H&&S(ee.last_text)?(pe=!0,T(),void 0):"*"!==q||"TK_DOT"!==H||J.match(/^\d+$/)?":"===q&&ee.in_case?(ee.case_body=!0,E(),T(),u(),ee.in_case=!1,void 0):"::"===q?(T(),void 0):(!ue||"--"!==q&&"++"!==q||u(),"TK_OPERATOR"===H&&c(),w(q,["--","++","!","~"])||w(q,["-","+"])&&(w(H,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||w(ee.last_text,oe)||","===ee.last_text)?(t=!1,e=!1,";"===ee.last_text&&v(ee.mode)&&(t=!0),"TK_RESERVED"===H&&(t=!0),ee.mode!==ge.BlockStatement&&ee.mode!==ge.Statement||"{"!==ee.last_text&&";"!==ee.last_text||u()):":"===q?0===ee.ternary_depth?(ee.mode===ge.BlockStatement&&(ee.mode=ge.ObjectLiteral),t=!1):ee.ternary_depth-=1:"?"===q?ee.ternary_depth+=1:"*"===q&&"TK_RESERVED"===H&&"function"===ee.last_text&&(t=!1,e=!1),pe=pe||t,T(),pe=e,void 0):(T(),void 0)}function G(){var t,e=o(q),n=!1,i=!1,r=Te.join(""),s=r.length;for(u(!1,!0),e.length>1&&(b(e.slice(1),"*")?n=!0:y(e.slice(1),r)&&(i=!0)),T(e[0]),t=1;e.length>t;t++)u(!1,!0),n?T(" "+_(e[t])):i&&e[t].length>s?T(e[t].substring(s)):Y[Y.length-1].text.push(e[t]);u(!1,!0)}function z(){pe=!0,T(),pe=!0}function X(){ue?u(!1,!0):s(!0),pe=!0,T(),u(!1,!0)}function F(){O(),"TK_RESERVED"===H&&S(ee.last_text)?pe=!0:c(")"===ee.last_text&&Ke.break_chained_methods),T()}function $(){T(),"\n"===q[q.length-1]&&u()}var Q,Y,q,Z,H,J,te,ee,ne,ie,re,se,ae,_e,oe,he,le,ce,ue,pe,fe,de,Te,Ee,ge,Ke,Re="";for(re="\n\r	 ".split(""),se="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),le="0123456789".split(""),ae="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! ~ , : ? ^ ^= |= :: =>",ae+=" <%= <% %> <?= <? ?>",ae=ae.split(" "),oe="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,yield".split(","),he=oe.concat(["do","in","else","get","set","new","catch","finally","typeof"]),ge={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"},Ee={TK_START_EXPR:L,TK_END_EXPR:D,TK_START_BLOCK:I,TK_END_BLOCK:M,TK_WORD:P,TK_RESERVED:P,TK_SEMICOLON:V,TK_STRING:j,TK_EQUALS:U,TK_OPERATOR:W,TK_COMMA:B,TK_BLOCK_COMMENT:G,TK_INLINE_COMMENT:z,TK_COMMENT:X,TK_DOT:F,TK_UNKNOWN:$},e=e?e:{},Ke={},void 0!==e.space_after_anon_function&&void 0===e.jslint_happy&&(e.jslint_happy=e.space_after_anon_function),void 0!==e.braces_on_own_line&&(Ke.brace_style=e.braces_on_own_line?"expand":"collapse"),Ke.brace_style=e.brace_style?e.brace_style:Ke.brace_style?Ke.brace_style:"collapse","expand-strict"===Ke.brace_style&&(Ke.brace_style="expand"),Ke.indent_size=e.indent_size?parseInt(e.indent_size,10):4,Ke.indent_char=e.indent_char?e.indent_char:" ",Ke.preserve_newlines=void 0===e.preserve_newlines?!0:e.preserve_newlines,Ke.break_chained_methods=void 0===e.break_chained_methods?!1:e.break_chained_methods,Ke.max_preserve_newlines=void 0===e.max_preserve_newlines?0:parseInt(e.max_preserve_newlines,10),Ke.space_in_paren=void 0===e.space_in_paren?!1:e.space_in_paren,Ke.space_in_empty_paren=void 0===e.space_in_empty_paren?!1:e.space_in_empty_paren,Ke.jslint_happy=void 0===e.jslint_happy?!1:e.jslint_happy,Ke.keep_array_indentation=void 0===e.keep_array_indentation?!1:e.keep_array_indentation,Ke.space_before_conditional=void 0===e.space_before_conditional?!0:e.space_before_conditional,Ke.unescape_strings=void 0===e.unescape_strings?!1:e.unescape_strings,Ke.wrap_line_length=void 0===e.wrap_line_length?0:parseInt(e.wrap_line_length,10),Ke.e4x=void 0===e.e4x?!1:e.e4x,e.indent_with_tabs&&(Ke.indent_char="	",Ke.indent_size=1),te="";Ke.indent_size>0;)te+=Ke.indent_char,Ke.indent_size-=1;for(;t&&(" "===t.charAt(0)||"	"===t.charAt(0));)Re+=t.charAt(0),t=t.substring(1);Q=t,fe=t.length,H="TK_START_BLOCK",J="",Y=[i()],pe=!1,Te=[],ie=[],R(ge.BlockStatement),_e=0,this.beautify=function(){for(var t,e,n,i;!0;){if(t=C(),q=t[0],Z=t[1],"TK_EOF"===Z){for(;ee.mode===ge.Statement;)x();break}if(n=Ke.keep_array_indentation&&m(ee.mode),ue=de>0,n)for(e=0;de>e;e+=1)u(e>0);else if(Ke.max_preserve_newlines&&de>Ke.max_preserve_newlines&&(de=Ke.max_preserve_newlines),Ke.preserve_newlines&&de>1)for(u(),e=1;de>e;e+=1)u(!0);Ee[Z](),"TK_INLINE_COMMENT"!==Z&&"TK_COMMENT"!==Z&&"TK_BLOCK_COMMENT"!==Z&&"TK_UNKNOWN"!==Z&&(J=ee.last_text,H=Z,ee.last_text=q),ee.had_comment="TK_INLINE_COMMENT"===Z||"TK_COMMENT"===Z||"TK_BLOCK_COMMENT"===Z}i=Y[0].text.join("");for(var r=1;Y.length>r;r++)i+="\n"+Y[r].text.join("");return i=i.replace(/[\r\n ]+$/,"")}}var r={};(function(exports){var t="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",e="\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",n=new RegExp("["+t+"]"),i=new RegExp("["+t+e+"]");exports.isIdentifierStart=function(t){return 65>t?36===t:91>t?!0:97>t?95===t:123>t?!0:t>=170&&n.test(String.fromCharCode(t))},exports.isIdentifierChar=function(t){return 48>t?36===t:58>t?!0:65>t?!1:91>t?!0:97>t?95===t:123>t?!0:t>=170&&i.test(String.fromCharCode(t))}})(r),"function"==typeof e&&e.amd?e([],function(){return{js_beautify:t}}):"undefined"!=typeof exports?exports.js_beautify=t:"undefined"!=typeof n?n.js_beautify=t:"undefined"!=typeof global&&(global.js_beautify=t)})(),function(){function t(e,n){function i(){return E=e.charAt(++K)}function r(){return e.charAt(K+1)}function s(t){for(var n=K;i();)if("\\"===E)i(),i();else{if(E===t)break;if("\n"===E)break}return e.substring(n,K+1)}function a(){for(var t=K;g.test(r());)K++;return K!==t}function _(){var t=K;do;while(g.test(i()));return K!==t+1}function o(t){var n=K;for(i();i();){if("*"===E&&"/"===r()){K++;break}if(t&&"\n"===E)break}return e.substring(n,K+1)}function h(t){return e.substring(K-t.length,K).toLowerCase()===t}function l(){var t=e.indexOf("\n",K);if(t===-1)return!1;var n=e.substring(K,t);return n.indexOf("//")!==-1}function c(){v++,R+=m}function u(){v--,R=R.slice(0,-p)}n=n||{};var p=n.indent_size||4,f=n.indent_char||" ",d=void 0===n.selector_separator_newline?!0:n.selector_separator_newline,T=void 0===n.end_with_newline?!1:n.end_with_newline;"string"==typeof p&&(p=parseInt(p,10));var E,g=/^\s+$/,K=-1,R=e.match(/^[\r\n]*[\t ]*/)[0],m=new Array(p+1).join(f),v=0,x=0,A={};A["{"]=function(t){A.singleSpace(),O.push(t),A.newLine()},A["}"]=function(t){A.newLine(),O.push(t),A.newLine()},A._lastCharWhitespace=function(){return g.test(O[O.length-1])},A.newLine=function(t){if(!t)for(;A._lastCharWhitespace();)O.pop();O.length&&O.push("\n"),R&&O.push(R)},A.singleSpace=function(){O.length&&!A._lastCharWhitespace()&&O.push(" ")};var O=[];R&&O.push(R);for(var b=!1,y=!1;!0;){var S=_();if(!E)break;if("/"===E&&"*"===r()){A.newLine(),O.push(o(),"\n",R);var w=h("");w&&A.newLine()}else if("/"===E&&"/"===r())O.push(o(!0),R);else if("@"===E){var N=s(" ").replace(/ $/,"");O.push(N,E),N in t.NESTED_AT_RULE&&(x+=1,N in t.CONDITIONAL_GROUP_RULE&&(y=!0))}else if("{"===E)a(),"}"===r()?(i(),O.push(" {}")):(c(),A["{"](E),y?(y=!1,b=v>x):b=v>=x);else if("}"===E)u(),A["}"](E),b=!1,x&&x--;else if(":"===E)a(),b||y?O.push(E," "):":"===r()?(i(),O.push("::")):O.push(E);else if('"'===E||"'"===E)O.push(s(E));else if(";"===E)if(l()){var k=s("/"),C=o(!0);O.push(k,C.substring(1,C.length-1),"\n",R)}else O.push(E,"\n",R);else"("===E?h("url")?(O.push(E),a(),i()&&(")"!==E&&'"'!==E&&"'"!==E?O.push(s(")")):K--)):(S&&A.singleSpace(),O.push(E),a()):")"===E?O.push(E):","===E?(a(),O.push(E),!b&&d?A.newLine():A.singleSpace()):"]"===E?O.push(E):"["===E?(S&&A.singleSpace(),O.push(E)):"="===E?(a(),O.push(E)):(S&&A.singleSpace(),O.push(E))}var L=O.join("").replace(/[\n ]+$/,""),D=T,I=/\n$/.test(L);return D&&!I?L+="\n":!D&&I&&(L=L.slice(0,-1)),L}t.NESTED_AT_RULE={"@page":!0,"@font-face":!0,"@keyframes":!0,"@media":!0,"@supports":!0,"@document":!0},t.CONDITIONAL_GROUP_RULE={"@media":!0,"@supports":!0,"@document":!0},"function"==typeof e&&e.amd?e([],function(){return{css_beautify:t}}):"undefined"!=typeof exports?exports.css_beautify=t:"undefined"!=typeof n?n.css_beautify=t:"undefined"!=typeof global&&(global.css_beautify=t)}(),function(){function t(t){return t.replace(/^\s+|\s+$/g,"")}function i(t){return t.replace(/^\s+/g,"")}function r(e,n,r,s){function a(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.newlines=0,this.indent_content=o,this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(t,e){for(var n=0;e.length>n;n++)if(t===e[n])return!0;return!1}},this.traverse_whitespace=function(){var t="";if(t=this.input.charAt(this.pos),this.Utils.in_array(t,this.Utils.whitespace)){for(this.newlines=0;this.Utils.in_array(t,this.Utils.whitespace);)f&&"\n"===t&&d>=this.newlines&&(this.newlines+=1),this.pos++,t=this.input.charAt(this.pos);return!0}return!1},this.get_content=function(){for(var t="",e=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return e.length?e.join(""):["","TK_EOF"];if(this.traverse_whitespace())e.length&&(n=!0);else{if(T){var i=this.input.substr(this.pos,3);if("{{#"===i||"{{/"===i)break;if("{{"===this.input.substr(this.pos,2)&&"{{else}}"===this.get_tag(!0))break}t=this.input.charAt(this.pos),this.pos++,n&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,e),this.print_indentation(e)):(this.line_char_count++,e.push(" ")),n=!1),this.line_char_count++,e.push(t)}}return e.length?e.join(""):""},this.get_contents_to=function(t){if(this.pos===this.input.length)return["","TK_EOF"];var e="",n=new RegExp("</"+t+"\\s*>","igm");n.lastIndex=this.pos;var i=n.exec(this.input),r=i?i.index:this.input.length;return r>this.pos&&(e=this.input.substring(this.pos,r),this.pos=r),e},this.record_tag=function(t){this.tags[t+"count"]?(this.tags[t+"count"]++,this.tags[t+this.tags[t+"count"]]=this.indent_level):(this.tags[t+"count"]=1,this.tags[t+this.tags[t+"count"]]=this.indent_level),this.tags[t+this.tags[t+"count"]+"parent"]=this.tags.parent,this.tags.parent=t+this.tags[t+"count"]},this.retrieve_tag=function(t){if(this.tags[t+"count"]){for(var e=this.tags.parent;e&&t+this.tags[t+"count"]!==e;)e=this.tags[e+"parent"];e&&(this.indent_level=this.tags[t+this.tags[t+"count"]],this.tags.parent=this.tags[e+"parent"]),delete this.tags[t+this.tags[t+"count"]+"parent"],delete this.tags[t+this.tags[t+"count"]],1===this.tags[t+"count"]?delete this.tags[t+"count"]:this.tags[t+"count"]--}},this.indent_to_tag=function(t){if(this.tags[t+"count"]){for(var e=this.tags.parent;e&&t+this.tags[t+"count"]!==e;)e=this.tags[e+"parent"];e&&(this.indent_level=this.tags[t+this.tags[t+"count"]])}},this.get_tag=function(t){var e,n,i,r="",s=[],a="",_=!1,o=this.pos,h=this.line_char_count;t=void 0!==t?t:!1;do{if(this.pos>=this.input.length)return t&&(this.pos=o,this.line_char_count=h),s.length?s.join(""):["","TK_EOF"];if(r=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(r,this.Utils.whitespace))_=!0;else{if(("'"===r||'"'===r)&&(r+=this.get_unformatted(r),_=!0),"="===r&&(_=!1),s.length&&"="!==s[s.length-1]&&">"!==r&&_&&(this.line_char_count>=this.wrap_line_length?(this.print_newline(!1,s),this.print_indentation(s)):(s.push(" "),this.line_char_count++),_=!1),T&&"<"===i&&"{{"===r+this.input.charAt(this.pos)&&(r+=this.get_unformatted("}}"),s.length&&" "!==s[s.length-1]&&"<"!==s[s.length-1]&&(r=" "+r),_=!0),"<"!==r||i||(e=this.pos-1,i="<"),T&&!i&&s.length>=2&&"{"===s[s.length-1]&&"{"==s[s.length-2]&&(e="#"===r||"/"===r?this.pos-3:this.pos-2,i="{"),this.line_char_count++,s.push(r),s[1]&&"!"===s[1]){s=[this.get_comment(e)];break}if(T&&"{"===i&&s.length>2&&"}"===s[s.length-2]&&"}"===s[s.length-1])break}}while(">"!==r);var l,c,u=s.join("");l=u.indexOf(" ")!==-1?u.indexOf(" "):"{"===u[0]?u.indexOf("}"):u.indexOf(">"),c="<"!==u[0]&&T?"#"===u[2]?3:2:1;var f=u.substring(c,l).toLowerCase();return"/"===u.charAt(u.length-2)||this.Utils.in_array(f,this.Utils.single_token)?t||(this.tag_type="SINGLE"):T&&"{"===u[0]&&"else"===f?t||(this.indent_to_tag("if"),this.tag_type="HANDLEBARS_ELSE",this.indent_content=!0,this.traverse_whitespace()):"script"===f&&(u.search("type")===-1||u.search("type")>-1&&u.search(/\b(text|application)\/(x-)?(javascript|ecmascript|jscript|livescript)/)>-1)?t||(this.record_tag(f),this.tag_type="SCRIPT"):"style"===f&&(u.search("type")===-1||u.search("type")>-1&&u.search("text/css")>-1)?t||(this.record_tag(f),this.tag_type="STYLE"):this.is_unformatted(f,p)?(a=this.get_unformatted("</"+f+">",u),s.push(a),e>0&&this.Utils.in_array(this.input.charAt(e-1),this.Utils.whitespace)&&s.splice(0,0,this.input.charAt(e-1)),n=this.pos-1,this.Utils.in_array(this.input.charAt(n+1),this.Utils.whitespace)&&s.push(this.input.charAt(n+1)),this.tag_type="SINGLE"):"!"===f.charAt(0)?t||(this.tag_type="SINGLE",this.traverse_whitespace()):t||("/"===f.charAt(0)?(this.retrieve_tag(f.substring(1)),this.tag_type="END",this.traverse_whitespace()):(this.record_tag(f),"html"!==f.toLowerCase()&&(this.indent_content=!0),this.tag_type="START",this.traverse_whitespace()),this.Utils.in_array(f,this.Utils.extra_liners)&&(this.print_newline(!1,this.output),this.output.length&&"\n"!==this.output[this.output.length-2]&&this.print_newline(!0,this.output))),t&&(this.pos=o,this.line_char_count=h),s.join("")},this.get_comment=function(t){var e="",n=">",i=!1;for(this.pos=t,input_char=this.input.charAt(this.pos),this.pos++;this.pos<=this.input.length&&(e+=input_char,e[e.length-1]!==n[n.length-1]||e.indexOf(n)===-1);)!i&&10>e.length&&(0===e.indexOf("<![if")?(n="<![endif]>",i=!0):0===e.indexOf("<![cdata[")?(n="]]>",i=!0):0===e.indexOf("<![")?(n="]>",i=!0):0===e.indexOf("<!--")&&(n="-->",i=!0)),input_char=this.input.charAt(this.pos),this.pos++;return e},this.get_unformatted=function(t,e){if(e&&e.toLowerCase().indexOf(t)!==-1)return"";var n="",i="",r=0,s=!0;do{if(this.pos>=this.input.length)return i;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!s){this.line_char_count--;continue}if("\n"===n||"\r"===n){i+="\n",this.line_char_count=0;continue}}i+=n,this.line_char_count++,s=!0,T&&"{"===n&&i.length&&"{"===i[i.length-2]&&(i+=this.get_unformatted("}}"),r=i.length)}while(i.toLowerCase().indexOf(t,r)===-1);return i},this.get_token=function(){var t;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var e=this.last_token.substr(7);return t=this.get_contents_to(e),"string"!=typeof t?t:[t,"TK_"+e]}if("CONTENT"===this.current_mode)return t=this.get_content(),"string"!=typeof t?t:[t,"TK_CONTENT"];if("TAG"===this.current_mode){if(t=this.get_tag(),"string"!=typeof t)return t;var n="TK_TAG_"+this.tag_type;return[t,n]}},this.get_full_indent=function(t){return t=this.indent_level+t||0,1>t?"":Array(t+1).join(this.indent_string)},this.is_unformatted=function(t,e){if(!this.Utils.in_array(t,e))return!1;if("a"!==t.toLowerCase()||!this.Utils.in_array("a",e))return!0;var n=this.get_tag(!0),i=(n||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);return!i||this.Utils.in_array(i,e)?!0:!1},this.printer=function(t,e,n,r,s){this.input=t||"",this.output=[],this.indent_character=e,this.indent_string="",this.indent_size=n,this.brace_style=s,this.indent_level=0,this.wrap_line_length=r,this.line_char_count=0;for(var a=0;this.indent_size>a;a++)this.indent_string+=this.indent_character;this.print_newline=function(t,e){this.line_char_count=0,e&&e.length&&(t||"\n"!==e[e.length-1])&&e.push("\n")},this.print_indentation=function(t){for(var e=0;this.indent_level>e;e++)t.push(this.indent_string),this.line_char_count+=this.indent_string.length},this.print_token=function(t){(t||""!==t)&&this.output.length&&"\n"===this.output[this.output.length-1]&&(this.print_indentation(this.output),t=i(t)),this.print_token_raw(t)},this.print_token_raw=function(t){t&&""!==t&&(t.length>1&&"\n"===t[t.length-1]?(this.output.push(t.slice(0,-1)),this.print_newline(!1,this.output)):this.output.push(t));for(var e=0;this.newlines>e;e++)this.print_newline(e>0,this.output);this.newlines=0},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var _,o,h,l,c,u,p,f,d,T;for(n=n||{},void 0!==n.wrap_line_length&&0!==parseInt(n.wrap_line_length,10)||void 0===n.max_char||0===parseInt(n.max_char,10)||(n.wrap_line_length=n.max_char),o=void 0===n.indent_inner_html?!1:n.indent_inner_html,h=void 0===n.indent_size?4:parseInt(n.indent_size,10),l=void 0===n.indent_char?" ":n.indent_char,u=void 0===n.brace_style?"collapse":n.brace_style,c=0===parseInt(n.wrap_line_length,10)?32786:parseInt(n.wrap_line_length||250,10),p=n.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"],f=void 0===n.preserve_newlines?!0:n.preserve_newlines,d=f?isNaN(parseInt(n.max_preserve_newlines,10))?32786:parseInt(n.max_preserve_newlines,10):0,T=void 0===n.indent_handlebars?!1:n.indent_handlebars,_=new a,_.printer(e,l,h,c,u);!0;){var E=_.get_token();if(_.token_text=E[0],_.token_type=E[1],"TK_EOF"===_.token_type)break;switch(_.token_type){case"TK_TAG_START":_.print_newline(!1,_.output),_.print_token(_.token_text),_.indent_content&&(_.indent(),_.indent_content=!1),_.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":_.print_newline(!1,_.output),_.print_token(_.token_text),_.current_mode="CONTENT";
break;case"TK_TAG_END":if("TK_CONTENT"===_.last_token&&""===_.last_text){var g=_.token_text.match(/\w+/)[0],K=null;_.output.length&&(K=_.output[_.output.length-1].match(/(?:<|{{#)\s*(\w+)/)),(null===K||K[1]!==g)&&_.print_newline(!1,_.output)}_.print_token(_.token_text),_.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var R=_.token_text.match(/^\s*<([a-z]+)/i);R&&_.Utils.in_array(R[1],p)||_.print_newline(!1,_.output),_.print_token(_.token_text),_.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":_.print_token(_.token_text),_.indent_content&&(_.indent(),_.indent_content=!1),_.current_mode="CONTENT";break;case"TK_CONTENT":_.print_token(_.token_text),_.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==_.token_text){_.print_newline(!1,_.output);var m,v=_.token_text,x=1;"TK_SCRIPT"===_.token_type?m="function"==typeof r&&r:"TK_STYLE"===_.token_type&&(m="function"==typeof s&&s),"keep"===n.indent_scripts?x=0:"separate"===n.indent_scripts&&(x=-_.indent_level);var A=_.get_full_indent(x);if(m)v=m(v.replace(/^\s*/,A),n);else{var O=v.match(/^\s*/)[0],b=O.match(/[^\n\r]*$/)[0].split(_.indent_string).length-1,y=_.get_full_indent(x-b);v=v.replace(/^\s*/,A).replace(/\r\n|\r|\n/g,"\n"+y).replace(/\s+$/,"")}v&&(_.print_token_raw(A+t(v)),_.print_newline(!1,_.output))}_.current_mode="TAG"}_.last_token=_.token_type,_.last_text=_.token_text}return _.output.join("")}if("function"==typeof e&&e.amd)e(["require","./beautify","./beautify-css"],function(t){var e=t("./beautify"),n=t("./beautify-css");return{html_beautify:function(t,i){return r(t,i,e.js_beautify,n.css_beautify)}}});else if("undefined"!=typeof exports){var s=require("./beautify.js"),a=require("./beautify-css.js");exports.html_beautify=function(t,e){return r(t,e,s.js_beautify,a.css_beautify)}}else"undefined"!=typeof n?n.html_beautify=function(t,e){return r(t,e,n.js_beautify,n.css_beautify)}:"undefined"!=typeof global&&(global.html_beautify=function(t,e){return r(t,e,global.js_beautify,global.css_beautify)})}()});